---
// src/pages/como-funciona.astro
import Layout from '@layouts/Layout.astro';
import RandomSongGift from '@components/RandomSongGift.svelte';
import { YouTubeService } from '@services/YoutubeService';

const API_KEY = import.meta.env.YOUTUBE_API_KEY;
const randomVideo = await YouTubeService.getRandomAnimeOpening(API_KEY);

---

<Layout title="C√≥mo funciona">
  <section class="max-w-3xl mx-auto py-20 px-6">
    <header class="mb-8">
      <h1 class="text-4xl md:text-5xl font-extrabold text-[#2957ba] mb-6">
        ¬øC√≥mo funciona esta vaina?
      </h1>
    </header>

    <article class="prose prose-lg max-w-none">
      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        Mira, no hay mucha ciencia. Vas al <a href="/" class="text-[#2957ba] underline">inicio</a> 
        y le das click al bendito bot√≥n de 
        <span class="font-semibold">"Verificar ahora"</span>. 
        Ya. Eso es todo. Fin del tutorial.  
      </p>

      <p class="text-lg text-gray-700 leading-relaxed mb-6">
        Honestamente no s√© ni pa' qu√© hice esta vista si es obvio c√≥mo funciona esta vaina, 
        pero bueno, ya que est√°s aqu√≠, te voy a dar un regalo sorpresa üëá
      </p>
    </article>

    <!-- Componente Svelte para la canci√≥n sorpresa -->
    <RandomSongGift 
      client:load
      initialSongUrl={randomVideo.url}
      initialSongTitle={randomVideo.title}
      apiKey={API_KEY || ''}
    />

    <div class="mt-8 text-center">
      <a 
        href="tmo-status/" 
        class="inline-block px-6 py-3 bg-gray-100 hover:bg-gray-200 text-[#2957ba] font-semibold rounded-full shadow transition"
      >
        ‚Üê Volver al inicio
      </a>
    </div>
  </section>
</Layout>